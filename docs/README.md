# Happyroom

2223_CC_Group02_Oryana_Celine
![Groepsfoto](/docs/Images/Groepsfoto.jpeg)

## Inhoud

1. Het project
   - Brainstorm
   - Onderzoek
   - Flowchart
   - Proof of concept
   - Tips & tricks
   - Valkuilen
   - Het procesdocument
   - MakerSpace ontwikkelingen
2. Uitleg code
3. Opstelling kamer
4. Video installatie
5. Website

## Het project

### Brainstorm

Om inspiratie op te doen, zijn we naar het NXT museum in Amsterdam geweest. Daar konden we alvast proeven van de vele interactieve multimedia installaties. De week nadien begon onze brainstorm. Zowel Oryana als ik (Céline) hadden een voorkeur voor de laatste kamer van het NXT museum. Deze kamer had een echte interactie met de bezoekers namelijk, beamers die bollen of strepen toonden waar je op kon staan/zitten of de streep die als springtouw gebruikt werd. Dit in combinatie met een leuk, schattig stemmetje en toffe visuals, maakte het af. Dit wilden wij graag doortrekken naar ons project. Het leuke, speelse, maar voornamelijk toffe idee van een installtie. Zo gezegd zo gedaan. We zijn begonnen met wat concepten te bedenken:

- 1 kamer, 1000 ogen. Rondom jou lijkt het dat je voortdurend vanuit alle richtingen wordt bekeken.

- De kleur van je aura wordt de basic color in de kamer. Deze wordt bepaald op basis van je gevoel.

- De snelheid van de muziek wordt door jezelf bepaald naargelang de bewegingen die je maakt. Je hartslag is de beat van de muziek dat zich zowel audio- als visueel vertoont.

#### Eerste brainstorm

Onze voorkeur ging uit naar het tweede puntje.

De feedback van docenten: Het idee is tof, maar er moet een waarom uitkomen. Waarom zouden we dit maken? Er moest dus wat gewerkt worden aan de storytelling. Hier kwamen we al vrij snel uit op het gezegde dat zitten het nieuwe roken is. Het is niet goed voor onze fysieke en mentale gezondheid om dagelijks uren aan een stuk te zitten. Met die insteek leek het ons een goed verhaal om hierop verder te bouwen. Daarbij moesten we informatie opzoeken rond mindfullness, mediteren, chakra’s.

Enkele weken later, kregen we te horen dat ons ideetje niet evident uit te voeren was. De koptelefoons waren moeilijk om door te geven en om er genoeg te voorzien voor iedereen die de kamer zou betreden. Het zou ook moeilijk geweest zijn om effectief gevoel te scannen aan de hand van face detectie. Dan maar opnieuw gebrainstormd.

#### Tweede brainstorm

Er moest meer nagedacht worden over de uitwerking. Hoe alles in zijn werk zal gaan van stap 1 bij het binnenkomen van de “happy room” tot het einde. Het zit al goed, maar we moeten heel veel testen en uitwerken, logisch! Het moeilijkste deeltje van ons project zal het coderen va de bollen op de vloer zijn.

Om een lang verhaal kort te maken, de bollen waren uiteindelijk te lastig om te coderen en uit te voeren. Aan de hand van face detection zouden er bollen op de grond moeten verschijnen zodat de gebruiker van de kamer weet waar die persoon zou kunnen plaats nemen.
DERDE EN FINAL BRAINSTORM
We hebben ervoor gekozen om de bollen te laten voor wat ze zijn. Het was absoluut niet haalbaar om dit uit te werken, dus hebben we de facedetection laten vallen. Natuurlijk moest er een interactie in de plaats komen en daarvoor kozen we onze microfoon!

Dit houdt in dat de gebruiker(s) de installatie zelf laten starten door te applaudiseren, roepen, lachen, gieren, brullen en dat idee was voor ons het meeste haalbaar, maar zeker ook het leukste.

Daarnaast hebben we nagedacht over het visuele en daarbij is tot stand gekomen een leuke mascotte nodig hebben. Maak kennis met Appie van hAPPIness. Dit schattige monstertje zorgt ervoor dat zowel de mensen die the happy room betreden gelukkig worden en daarbij zal hij ook geleidelijk aan gelukkiger en gelukkiger worden.

### Onderzoek

#### Onderzoek gezichtsuitdrukking

Geluk:
Een gelukkig of vreugdevol gezicht zal glimlachen (de mondhoeken omhoog en naar achteren) met ontblote tanden en een rimpel die van de neusvleugel naar de mondhoeken loopt. De wangen zijn opgetrokken en de onderste oogleden zijn gespannen of gerimpeld. De vernauwing van de oogleden veroorzaakt 'kraaienpoten' op de buitenste hoeken van de ogen.
Een lach zonder de oogspieren in te schakelen vormt een valse glimlach of beleefde glimlach, die geen werkelijk geluk of vreugde uitstraalt.

Verdriet:
Een verdrietig gezicht heeft naar binnen en omhoog getrokken wenkbrauwen, waarbij de huid tussen de wenkbrauwen een driehoek vormt en de binnenste hoeken van de wenkbrauwen omhoog staan, en de mondhoeken naar beneden gebogen zijn. De kaak komt omhoog en de onderlip pruilt naar voren.
Studies hebben aangetoond dat deze emotie de moeilijkste expressie is om te faken.

Minachting:
Bij een gezicht dat minachting of haat toont, gaat een van de mondhoeken omhoog, als een soort halve glimlach die eigenlijk meer een grijnslach is.

Walging:
Bij een walgend gezicht zijn de wenkbrauwen neergeslagen, maar is het onderste ooglid omhoog getrokken (waardoor de ogen versmallen), de wangen zijn opgetrokken en de neus is opgekruld. De bovenlip is ook verhoogd of naar boven gekruld.

Verbazing:
Bij een verbaasd gezicht zijn de wenkbrauwen opgetrokken en gebogen. De huid onder de wenkbrauw is uitgerekt en je ziet horizontale rimpels op het voorhoofd. De oogleden staan zo wijd open dat er oogwit te zien is boven en/of onder de pupillen. De kaak is gedaald en de onder- en boventanden zijn enigszins van elkaar gescheiden, maar je ziet geen oprekking of spierspanning rond de mond.

Angst:
Een angstig gezicht heeft opgetrokken wenkbrauwen die doorgaans plat zijn, niet gebogen. Er staan rimpels op het voorhoofd in het midden tussen de wenkbrauwen, en niet erboven. De bovenste oogleden zijn opgetrokken, en de onderste oogleden zijn gespannen en opgetrokken, waarbij meestal oogwit te zien is boven de pupil, maar niet eronder. De lippen zijn meestal gespannen of teruggetrokken, de mond kan wat openstaan en de neusgaten zijn mogelijk opengesperd.

Woede:
Bij een boos gezicht zijn de wenkbrauwen verlaagd en samengetrokken, waarbij de ogen intens staren of uitpuilen, met verticale lijnen tussen de wenkbrauwen en gespannen onderste oogleden. Neusgaten staan mogelijk open en de lippen zijn ofwel stevig samengeperst waarbij de mondhoeken naar beneden staan, of in een vierkante vorm getrokken, alsof iemand schreeuwt. Ook de onderkaak steekt naar voren.

Gebruikt van verschillende uitdrukkingen:

Macro-expressie:
Een macro-expressie is het trekken van een gezicht dat past bij een bepaald gevoel, en dit duurt ergens tussen de 0,5 en 4 seconden, waarbij meestal het hele gezicht meedoet.
Dit soort expressies worden gemaakt als we alleen zijn, of samen met naaste familie of vrienden. Ze duren langer dan 'micro-expressies' omdat wij op ons gemak zijn in onze omgeving en niet de behoefte voelen om onze emoties te verbergen.
Macro-expressies zijn relatief gemakkelijk te zien, als je weet waar je naar moet kijken bij een persoon.

Micro-expressie:
Een micro-expressie is een korte versie van een emotionele gelaatsuitdrukking. Ze verschijnen en verdwijnen van het gezicht in een fractie (soms 1/30) van een seconde. Ze gebeuren zo snel dat als je knippert, je al te laat bent.
Micro-expressies zijn meestal een teken van verborgen emoties. Soms worden de emoties niet per se verhuld, maar gewoon snel verwerkt.
Onderzoek suggereert dat micro-expressies zich voordoen omdat gezichtsuitdrukkingen niet volledig kunnen worden gecontroleerd, zelfs als de persoon diens emoties probeert te controleren. Er zijn twee zenuwbanen in de hersenen die gezichtsuitdrukkingen sturen en een soort wedstrijd 'touwtrekken' houden over het gezicht wanneer iemand zich in een intens emotionele situatie bevindt, maar probeert om diens gevoelens te verbergen.

Kleur speelt een belangrijke rol in je merkidentiteit.

Warme kleuren: rood, oranje en geel
Rood, oranje en geel staan naast elkaar in de kleurencirkel. Het zijn allemaal warme kleuren die ons op een blije, energieke en optimistische manier kunnen prikkelen. Toch is het van belang om rekening te houden met te felle tinten, aangezien deze irritant kunnen zijn voor het oog.

Koele kleuren: groen, blauw en paars
Koele kleuren zijn onder andere groen, blauw en paars. Deze kleuren hebben een kalmerende en verzachtende werking, maar kunnen ook droevige gevoelens opwekken. Paars wordt gehanteerd om creativiteit los te maken, omdat het een mengkleur is die bestaat uit blauw (rustgevend) en rood (intens). Is je bedrijf gericht op beauty, gezondheid of veiligheid? Dan is paars de perfecte match.

Neutrale kleuren: zwart, grijs, wit en bruin
Neutrale kleuren als bruin, wit, grijs en zwart moeten we natuurlijk niet vergeten. Ze kunnen andere kleuren ondersteunen of juist meer naar de oppervlakte halen, zodat ze echt van je scherm of drukwerk af spatten. Felgeel springt er bijvoorbeeld meer uit tegen een zwarte achtergrond dan tegen een witte. Gebruik je texturen? Dan kun je voor de basis met bruin een aardse sfeer schetsen.

Uiteraard blijven kleuren voor een gedeelte subjectief.

#### Onderzoek kleur vs. emotie

Kleur speelt een belangrijke rol in je merkidentiteit.

Warme kleuren: rood, oranje en geel
Rood, oranje en geel staan naast elkaar in de kleurencirkel. Het zijn allemaal warme kleuren die ons op een blije, energieke en optimistische manier kunnen prikkelen. Toch is het van belang om rekening te houden met te felle tinten, aangezien deze irritant kunnen zijn voor het oog.

Koele kleuren: groen, blauw en paars
Koele kleuren zijn onder andere groen, blauw en paars. Deze kleuren hebben een kalmerende en verzachtende werking, maar kunnen ook droevige gevoelens opwekken. Paars wordt gehanteerd om creativiteit los te maken, omdat het een mengkleur is die bestaat uit blauw (rustgevend) en rood (intens). Is je bedrijf gericht op beauty, gezondheid of veiligheid? Dan is paars de perfecte match.

Neutrale kleuren: zwart, grijs, wit en bruin
Neutrale kleuren als bruin, wit, grijs en zwart moeten we natuurlijk niet vergeten. Ze kunnen andere kleuren ondersteunen of juist meer naar de oppervlakte halen, zodat ze echt van je scherm of drukwerk af spatten. Felgeel springt er bijvoorbeeld meer uit tegen een zwarte achtergrond dan tegen een witte. Gebruik je texturen? Dan kun je voor de basis met bruin een aardse sfeer schetsen.

Uiteraard blijven kleuren voor een gedeelte subjectief.

#### Onderzoek kleurmonsters

Omdat kinderen het vaak moeilijk hebben om emoties uit te spreken of te herkennen bij andere kwam Anna Llenas met het idee om hierover een reeks boeken te maken over de kleurenmonsters.

Anna is een auteur en illustrator die kinderen en volwassenen helpt de wereld van de emoties te ontdekken. Het kleurenmonster speelt daarbij een belangrijke rol. Het is een bestseller die in verschillende landen over de hele wereld te koop is.

![Onderzoek](/docs/Images/Onderzoek.png)

### Flowchart

Deze flowchart is geschets van ons allereerste idee. Vandaar dat er nog bollen aanwezig zijn.

![Flowchart](/docs/Images/Flowchart.png)

### Proof of concept

Dit is ook weer in de veronderstelling dat onze face detection nog zou doorgaan/
Video link: https://youtu.be/MzgA1i8AA1A

Voor onze proof of concept hebben we een video gemaakt om te laten zien hoe the happyroom in zijn werk zou gaan. Je gezicht wordt gescand en een bol verschijnt, je gaat op de bol staan en als iedereen binnen in de kamer is, begint het spel.

### Tips & tricks

1. Voorzie genoeg materiaal

- tape
- toetsenbord
- muis
- microfoon
- muziekbox
- verlengkabels
- zilverpapier
- verstuiver/platenspuitbus (water te sprayen)

2. Zorg dat de code op voorhand getest is en werkt

- Test de loop een paar keer (zorg dat die vlotjes doorloopt na de 2e, 3e, 4e,... keer nog speelt)
- Test of de loop te lang of te kort duurt voor het doelpubliek (Swiper staat mee in de code, maar duurde voor ons doelpubliek net te lang, waardoor ze zich verveelde) Eventueel in bepaalde settings kan dit extra rustgevend zijn om toch te tonen

3. Beamer, raspberry pi, bedrading, etc. netjes ordenen in de doos van de beamer. Zorg dat je op de grond of tafel alles netjes juist installeert, zodat je wanneer de doos op de sokkel staat, je er niet meer aan hoeft te komen.
4. Aankleding kamer

- Denk aan lichtjes
- Afbakening van de zone waar gebruikers mogen staan
- Waar je de sokkel plaatst
- Zorg voor verlengkabels eventueel meerdere omdat het stopcontact wat verder weg kan zijn.
- Maak de kamer donker met zilverpapier en een verstuiver met water is om te sprayen tegen het raam.

5. Zorg dat je op tijd alles begint klaar te zetten

- Sokkel in elkaar zetten, dit met velkro die kleefbaar is zodat de sokkel vast staat, maar evengoed makkelijk van elkaar te halen is
- Kleed de kamer mooi aan met de lichtjes
- Plak bedrading goed af met een opvallende tape, zodat gebruikers niet over de draden kunnen struikelen.

### Valkuilen

1. Zorg dat gebruikers zich niet vervelen

Tijdens enkele testen merkte we op dat de loop op het laatste te lang duurde en dat mensen begonnen te praten uit vevreling. We hadden dit geobserveerd en daarna aangepast dat de loop niet meer werd getoond.

2. Denk goed na over de uitwerking

In het midden van ons project zijn we tot de conclusie gekomen dat er bepaalde technische zaken niet mogelijk waren. Zoals de bollen die verschijnen na face detection. Het was qua code niet helemaal haalbaar en ook met een beamer die naar de grond wijst, was dat ook niet evident om dit uit te werken. Vandaar, brainstorm in het begin groots, maar denk na verloop van tijd na over hoe je dit kan realiseren. Zo bespaar je extra tijd!

3. De wet van murphy

Je zal merken dat wanneer alles samenkomt, je wat zenuwachtig wordt en dat alles tegenwerkt. Geloof ons, begin op tijd met uitwerken! Wanneer 1 ding foutloopt, lopen gegarandeerd meerdere dingen fout. Om dit te vermijden, kunnen we alleen maar aangeven: START ZO SNEL MOGELIJK MET UITWERKEN! Wacht niet tot het laatste moment, want dan wil iedereen zijn/haar laatste details uitwerken.

### Procesdocument

![Week1](/docs/Images/Week1.jpg)
![Week2](/docs/Images/Week2.jpg)
![Week3](/docs/Images/Week3.jpg)
![Week4](/docs/Images/Week4.jpg)
![Week5](/docs/Images/Week5.jpg)
![Week6](/docs/Images/Week6.jpg)
![Week7](/docs/Images/Week7.jpg)
![Week8](/docs/Images/Week8.jpg)
![Week9](/docs/Images/Week9.jpg)
![Week10](/docs/Images/Week10.jpg)

### MakerSpace ontwikkelingen

Voor onze installatie gingen wij ook aan de slag met verschillende materialen. Zo maakten wij een sokkel van 2m15 hoog om onze beamer op te plaatsen en bestickerde deze volledig.
Alsook maakte wij een deursticker.

Een handige link om technische plannen te genereren: https://en.makercase.com
De keuze wat er op de stickers komt is volledig persoonlijk, wij geven alvast onze ideeën mee:
![Technischplan1](/docs/Images/Technischplan1.png)
![Technischplan2](/docs/Images/Technischplan2.png)
![Technischplan3](/docs/Images/Technischplan3.png)

![StickerSokkel](/docs/Images/StickerSokkel.png)
![StickerDeur](/docs/Images/StickerDeur.png)

## Uitleg code

De code van de happyroom is onderverdeelt in de verschillende "opdrachten", die later als een loop worden afgespeeld. In de code zelf vind je telkens de nodige commentaar zodat je duidelijk weet wat je doet. Hieronder worden enkele van de belangrijkste zaken uitgelicht.

### Startscherm

Het startscherm maakt gebruik van een microfoon dat de decibels meet. Via JS word het aantal decibel gecontroleerd, vanaf dit een voldoende groot bereik heeft, wordt de loop in gang gezet.

```
<!-- HTML startscherm  -->
    <div id="startscherm">
      <h2 id="textstart"> Welcome to the Happy Room! <br>
        To start the Happy Room, we need your help. Let's all cheer, whistle, and scream together until we reach an happy sound level! <br>
        The louder we cheer, the happier the room becomes. Let's begin and have a great time! </h2>
      <div class="meter-container">
        <div class="meter"> </div>
      </div>
    </div>
```

```
/* CSS startscherm */
#startscherm{
  background-color: black;
  height: 100vh;
}
.meter-container {
  width: 100px;
  height: 400px;
  border: 1px solid black;
  margin-left: 50%;
  margin-right: 50%;
  overflow: hidden;
  position: relative;
}
.meter {
  width: 100%;
  height: 400px;
  background-image: linear-gradient(#FFF38A, #e2d164, #faa364, #db5fb5, #662D8D);
  transition: height 0.1s ease-in-out;
  position: relative;
  bottom: 0;
}
#textstart{
  font-family: 'Sweets Smile', sans-serif;
  color: #FFF38A;
  text-align: center;
  padding: 50px;
}
```

```
/*// JS Startscherm micro aanspreken */
const meterContainer = document.querySelector('.meter-container');
const meter = document.querySelector('.meter');
let analyser = null;

navigator.mediaDevices
  .getUserMedia({ audio: true })
  .then((stream) => {
    const audioContext = new AudioContext();
    const source = audioContext.createMediaStreamSource(stream);
    analyser = audioContext.createAnalyser();
    source.connect(analyser);
    analyser.fftSize = 2048;
    // Call the function to start the loop immediately
    console.log('start micro');
    speelOpdrachtenAf();
  })
  .catch((err) => console.error(err));

/* // JS startscherm bovenstaande micro aanspreken + loop laten afspelen bij voldoende geluid */
let startschermIsVisible = false;
function startscherm() {
  startschermIsVisible = true;

  const bufferLength = analyser.frequencyBinCount;
  const dataArray = new Uint8Array(bufferLength);
  const maxVolume = 255;

  const updateMeter = () => {
    analyser.getByteFrequencyData(dataArray);
    const volume = dataArray.reduce((a, b) => a + b) / bufferLength;
    const volumePercent = volume / maxVolume;
    meterContainer.style.height = `${volumePercent * 400}px`;
    meterContainer.style.top = `${400 - volumePercent * 400}px`;
    meter.style.top = `-${400 - volumePercent * 400}px`;

    if (startschermIsVisible) {
      if (volumePercent > 0.45) {
        console.log(volumePercent);
        startschermIsVisible = false;
        console.log('go!!!');
        speelOpdrachtenAf();
      }
      requestAnimationFrame(updateMeter);
    }
  };

  updateMeter();
}

```

### Loadingscherm

Het loadingscherm is een tussenscherm waarbij de mensen de ruimte kunnen verlaten en nieuwe mensen kunnen toekomen.

```
<!-- HTML loading scherm           -->
    <div id="loading">
      <h2 id="textloading"> Thanks for joining the Happy Room. We hope you had a great time and that Appie put a smile on your face. <br>
        You may now leave the room if you wish. </h2>
      <h1 id="loadingtext"> Some new happiness is loading </h1>
      <div class="wave">
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </div>
    </div>
```

```
/* CSS loading scherm  */
#loading{
  height: 100vh;
  background-color: black;
}
#loadingtext{
  font-family: 'Sweets Smile', sans-serif;
  color: #FFF38A;
  text-align: center;
  margin-top: 20px;
}
#textloading{
  font-family: 'Sweets Smile', sans-serif;
  color: #FFF38A;
  text-align: center;
  padding: 50px;
}
.wave {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100px;
  margin-top: 50px;
}
.dot {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background-color: #FFF38A;
  margin: 0 10px;
  animation-name: bounce;
  animation-duration: 1s;
  animation-iteration-count: infinite;
}
.dot:nth-child(1) {
  animation-delay: -0.32s;
}
.dot:nth-child(2) {
  animation-delay: -0.16s;
}
@keyframes bounce {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-30px);
  }
}
```

### Quotes

De quotes zijn volledig eigen keuze. Belangrijk is dat je quotes kiest in functie van mensen gelukkig te maken. Wij kozen voor onze mascotte als achtergrond te plaatsen met hierboven de quote. Hieronder een voorbeeld van hoe een quote in te voegen en de opmaak ervan.

```
<!--  HTML quote     -->
    <div id="quote1">
      <img id="imghappy" src="images/20happy.png" alt="20Happy">
    </div>
```

```
/* CSS quotes */
img, .imghappy {
  height: 100vh;
  width: 100%;
}
```

### Opdrachten

De opdrachten zijn volledig eigen keuze. Belangrijk is dat je opdrachten kiest in functie van mensen gelukkig te maken. Wij kozen voor volgende 4 opdrachten:

#### Opdracht 1: lachen maakt gelukkig

```
<!--  HTML Opdracht 1: lachen maakt gelukkig.   -->
    <div id="opdracht1">
      <h1>Luister en zeg na.</h1>
      <div id="opdrachten"> </div>
    </div>
```

```
/* CSS Opdracht 1: lachen maakt gelukkig.  */
#opdracht1{
  height: 100vh;
  background-color: #FFF38A;
}
h1{
  font-family: 'Sweets Smile', sans-serif;
  text-align: center;
  font-size: 80px;
  padding-top: 50px;
}
#opdrachten{
  font-family: 'Sweets Smile', sans-serif;
  text-align: center;
  font-size: 80px;
  padding-top: 50px;
}
```

Aangezien onze installatie volledig werkende is op een RaspberryPi, en dit de spraakfunctie niet ondersteunt. Kozen wij ervoor een opname te maken van de spraakfunctie en deze te laten afspelen op de achtergrond i.p.v. de werkende gecodeerde spraakfunctie.

```
/* // JS Opdracht 1: lachen maakt gelukkig. */
function opdracht1func() {
  const opdracht1 = [
    'Listen and repeat',
    'Ha',
    'Ha-Ha',
    'Ha-Ha-Ha',
    'Ha-Ha-Ha-Ha',
  ];
  let index = 0;
  const opdrachtenElement = document.getElementById('opdrachten');
  let loopInterval;

  function runLoop() {
    const currentOpdracht = opdracht1[index];
    opdrachtenElement.innerHTML = currentOpdracht;
    /* Speel de tekst af met de SpeechSynthesis API, deze werkt niet op een raspberry pi, vandaar vervangen door een audio fragment.
    const message = new SpeechSynthesisUtterance(currentOpdracht);
    message.rate = 0.8;
    window.speechSynthesis.speak(message); */

    index++;
    if (index >= opdracht1.length) {
      index = 0;
    }
  }

  Audio1.currentTime = 0;
  Audio1.autoplay = true;
  Audio1.loop = true;
  Audio1.play();

  // Toon de eerste opdracht en verwijder het H1 element
  document.querySelector('h1').style.display = 'none';

  // Start de loop en wacht 5 seconden tussen elke opdracht
  runLoop();
  loopInterval = setInterval(runLoop, 5000);

  setTimeout(function () {
    clearInterval(loopInterval);
  }, loop[2].duration);
}
```

#### Opdracht 2: bewegen maakt gelukkig

```
<!--  HTML Opdracht 2: bewegen maakt gelukkig.     -->
    <div id="opdracht2">
      <video>
      <source src="images/video.mp4" type="video/mp4">
      </video>
    </div>
```

```
/* CSS Opdracht 2: bewegen maakt gelukkig. */
#opdracht2 {
  height: 100vh;
  display: flex;
  justify-content: center;
  text-align: center;
  background-color: black;
}
#opdracht2 video {
  max-height: 100%;
}

```

```
/* // JS Opdracht 2: bewegen maakt gelukkig. */
function opdracht2func() {
  const video = document.querySelector('video');
  video.currentTime = 0;
  video.play();
}
```

#### Opdracht 3: meditatie maakt gelukkig

```
<!-- HTML Opdracht 3: Meditatie maakt gelukkig.  -->
    <div id="opdracht3">
      <div id="text">
        Now follow the circle... <br><br>
        Breathe in when the circle gets bigger, <br>
        breathe out when it gets smaller again.
      </div>
      <div id="circle"></div>
    </div>
```

```
/* CSS Opdracht 3: Meditatie maakt gelukkig. */
#opdracht3 {
  font-family: 'Sweets Smile', sans-serif;
  background-color: #1c1c1c;
  color: #ffffff;
  width: 100%;
  height: 100vh;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}
#text {
  font-size: 24px;
  padding-top: 75px;
  margin-bottom: 90px;
  text-align: center;
  opacity: 1;
  animation: fadeout 15s ease-in-out forwards;
}
#circle {
  width: 200px;
  height: 200px;
  border-radius: 50%;
  margin-left: 43%;
  background-color: #1c1c1c;
  display: flex;
  justify-content: center;
  align-items: center;
  box-shadow: 0 0 40px #FFF38A, 0 0 80px #FFF38A, 0 0 40px #FFF38A inset;
  animation: pulse 8s ease-in-out infinite;
}
@keyframes pulse {
  0% {
    transform: scale(1.3);
    opacity: 0.7;
  }
  50% {
    transform: scale(1.5);
    opacity: 1;
  }
  100% {
    transform: scale(1.3);
    opacity: 0.7;
  }
}
@keyframes fadeout {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}
```

```
/* // JS Opdracht 3: meditatie maakt gelukkig. */
// Get the HTML elements for the circle
function opdracht3func() {
  const circle = document.getElementById('circle');

  // Define a function to animate the circle
  function animateCircle() {
    // Calculate the scale of the inner circle based on the phase of the animation
    const maxScale = 2.5;
    const minScale = 2.0;
    const isPhase1 = Date.now() % 8000 < 3000; // inhale phase lasts for 4 seconds
    const phaseProgress = isPhase1
      ? (Date.now() % 4000) / 4000
      : (4000 - (Date.now() % 4000)) / 4000; // calculate the progress of the phase
    const scale = minScale + (maxScale - minScale) * phaseProgress; // calculate the scale based on the progress

    // Set the scale of the inner circle
    circle.style.transform = `scale(${scale})`;

    // Schedule the next frame of the animation
    if (huidigeOpdracht == 5) {
      requestAnimationFrame(animateCircle);
    }
  }

  Audio5.currentTime = 0;
  Audio5.autoplay = true;
  Audio5.loop = true;
  Audio5.play();

  // Start the animation
  animateCircle();
}
```

#### Opdracht 4: natuur maakt gelukkig

Wij besloten deze opdracht volledig in commentaar te plaatsen, omdat onze installatie anders te lang duurde.
Voor deze opdracht dient swiper geïnstaleerd te worden op je bestand. Dit doe je via volgende link: https://swiperjs.com/get-started

```
<!-- HTML Opdracht 4: natuur maakt gelukkig.     -->
    <div id="opdracht4">
      <div class="swiper">
        <div id="text2">
          There is nothing so relaxing as being surrounded by the peace and beauty of nature. <br>
          Here in nature you can clear your head and find inner peace.
        </div>
        <div class="swiper-wrapper">
          <div class="swiper-slide"><img src="images/winter.png"></div>
          <div class="swiper-slide"><img src="images/lente.png"></div>
          <div class="swiper-slide"><img src="images/zomer.png"></div>
          <div class="swiper-slide"><img src="images/herfst.png"></div>
        </div>
      </div>
    </div>
```

```
/* Opdracht 4: natuur maakt gelukkig. */
#opdracht4 {
  height: 100vh;
  background-color: #1c1c1c;
}
.swiper {
  width: 100%;
  height: 100%;
  max-height: 100vh;
}
.swiper-slide img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
#text2 {
  font-family: 'Sweets Smile', sans-serif;
  font-size: 24px;
  width: 200%;
  text-align: center;
  margin-left: -50%;
  margin-top: 1%;
  margin-bottom: 1%;
  color: #e2d164;
}
```

```
/* // JS Opdracht 4: natuur maakt gelukkig. */
/* import Swiper bundle with all modules installed */
import Swiper, { Autoplay, EffectFade } from 'swiper';
// import styles bundle
import 'swiper/css';
import 'swiper/css/autoplay';
import 'swiper/css/effect-fade';
```

```
/* // JS Opdracht 4: natuur maakt gelukkig. */
// init Swiper:
let opdracht4swiper = null;
function opdracht4func() {
  opdracht4swiper = new Swiper('.swiper', {
    speed: 25000,
    effect: 'fade', // Set effect to fade
    modules: [Autoplay, EffectFade],
    loop: true,
    autoplay: {
      delay: 10000,
    },
    direction: 'horizontal', // Set direction to horizontal or vertical
    slidesPerView: 1, // Set slidesPerView to 1
  });

  myAudio.currentTime = 0;
  myAudio.autoplay = true;
  myAudio.loop = true;
  myAudio.play();

  setTimeout(function () {
    opdracht4swiper.destroy();
  }, loop[8].duration);
}
```

### Loop

Wanneer al je opdrachten, quotes, .. geschreven zijn. Kan je deze toevoegen aan een loop. Belangrijk hiervoor is dat elke opdracht en quote een overkoepelende div heeft in de HTML alsook binnen de JS van de opdrachten telkens een functie bevat. Hieronder de JS van de loop die wij hebben toegepast.

```
/* JS loop */
const loop = [
  {
    element: document.getElementById('startscherm'),
    duration: null,
    audio: false,
    func: startscherm,
  },
  {
    element: document.getElementById('quote1'),
    duration: 10000,
    audio: false,
    func: null,
  },
  {
    element: document.getElementById('opdracht1'),
    duration: 23000,
    audio: false,
    func: opdracht1func,
  },
  {
    element: document.getElementById('quote2'),
    duration: 10000,
    audio: false,
    func: null,
  },
  {
    element: document.getElementById('opdracht2'),
    duration: 183000,
    audio: false,
    func: opdracht2func,
  },
  {
    element: document.getElementById('quote3'),
    duration: 10000,
    audio: false,
    func: null,
  },
  {
    element: document.getElementById('opdracht3'),
    duration: 60000,
    audio: false,
    func: opdracht3func,
  },
  {
    element: document.getElementById('quote4'),
    duration: 10000,
    audio: true,
    func: null,
  },
 {
    element: document.getElementById('opdracht4'),
    duration: 60000,
    audio: false,
    func: opdracht4func,
  },
  {
    element: document.getElementById('quote5'),
    duration: 10000,
    audio: false,
    func: null,
  },
  {
    element: document.getElementById('loading'),
    duration: 180000,
    audio: false,
    func: null,
  },
];

let huidigeOpdracht = loop.length;
const Audio1 = new Audio('images/Haha.mp3');
const myAudio = new Audio('images/natuurgeluiden.mp3');
const Audio5 = new Audio('images/meditatie.mp3');
let myTimeout = null;
function speelOpdrachtenAf() {
  huidigeOpdracht++;
  if (huidigeOpdracht >= loop.length) {
    huidigeOpdracht = 0;
  }

  // pause audio
  Audio1.pause();
  myAudio.pause();
  Audio5.pause();

  // Set display of all opdrachten to none
  for (let i = 0; i < loop.length; i++) {
    loop[i].element.style.display = 'none';
  }

  // Set display of current opdracht to block
  loop[huidigeOpdracht].element.style.display = 'block';
  console.log(huidigeOpdracht);
  // Play function
  if (loop[huidigeOpdracht].func) {
    loop[huidigeOpdracht].func();
  }

  // Set interval for the next opdracht$
  if (myTimeout) clearTimeout(myTimeout);
  if (loop[huidigeOpdracht].duration) {
    myTimeout = setTimeout(speelOpdrachtenAf, loop[huidigeOpdracht].duration);
  }
}
```

### RaspberryPi

Wil je de installatie laten werken via een externe manier dan je eigen PC? Zorg ervoor dat je al je code op een repositorie op github plaatst, haal deze binnen op je RaspBerryPi via git clone, installeer de nodige npm's en speel af.

## Opstelling kamer

Om de kamer op een leuke manier aan te kleden, ondank dat het donker is, kan je gebruik maken van zachte lampen. Wij gebruikte tuinlampen die niet te fel licht gaven. Daarbij creëer je een leuke gezellige sfeer. We willen absoluut vermijden dat het eng wordt gevonden om de kamer te betreden. Daarbij hebben we ook voor de aankleding gezorgd aan de buitenkant. Hier onze deursticker!

![DeurSticker](/docs/Images/DeurSticker.jpeg)

De deursticker zorgt ervoor dat je een korte inleiding krijgt over the happy room. Appie was heel aantrekkelijk voor mensen die voorbij wandelde. Met zijn grote ogen is hij super schattig en dat trekt veel mensen aan, opzet geslaagd! Om het nog wat feestelijker en leuker te maken, hebben we ook vlaggetjes opgehangen om ook wat sfeer te creëeren.

Daarnaast hebben we ook met rode tape gewerkt om een opvallende kleur te hebben voor het afbakenen van waar de gebruikers kunnen plaatsnemen. Natuurlijk ook om te voorkomen dat mensen zouden struikelen over de kabels van de sokkel.

De sokkel hebben we gemaakt in de makerspace. Dit met 9 mm dik hout en 2 boxen van 1m + de doos van de beamer die ook nog 15 cm hoog was. Wat maakt dat onze sokkel 2m15 hoog was. Deze hebben we bewust zo hoog gemaakt, omdat de beamer hoog genoeg moest staan zodat gebruikers niet in hun eigen schaduw keken. De sokkel hebben we ook bestickerd met quotes over gelukkig zijn met Appie. Dit gaf ook weer een toffe look in de kamer en was de draad die we doortrokken van onze branding.

![Sokkel](/docs/Images/Sokkel.jpeg)
![Sokkel1](/docs/Images/Sokkel1.jpeg)
![Sokkel2](/docs/Images/Sokkel2.jpeg)
![Sokkel3](/docs/Images/Sokkel3.jpeg)
![Sokkel4](/docs/Images/Sokkel4.jpeg)

Om de kamer te verduisteren is het nodig om alle ramen af te kleven. Een handige tip hiervoor is aluminiumfolie tegen de ramen kleven met water.

![Folli](/docs/Images/Folli.jpeg)

Zorg ervoor dat alle kabels zijn correct zijn verbonden met de RaspberryPi en de beamer.

![Kabels1](/docs/Images/Kabels.jpeg)
![Kabels2](/docs/Images/Kabels2.jpeg)

## Video installatie

De video laat zien hoe de happy room in werking gaat mét publiek. We nemen je mee doorheen de loop zodat je een goed overzicht krijgt van de werking van the happy room. Veel kijk plezier!
Video link: https://youtu.be/56_FdNAs5HA

Bron muziek: "Happy" - Pharrell Williams

## Website

Op onze website kan je onze branding terugvinden van the happy room. Daar staat Appie klaar om je weer te begroeten. Op onze website vertellen we over het project, concept, wie we zijn, wie appie is en natuurlijk aangevuld met beeldmateriaal en onze video.

https://happyroom.celineverschueren.be
